<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Extensions - Lichtblick Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="theme/pagetoc.css">


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Lichtblick Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <div class="content-wrap">
                            <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>Enhance Lichtblick's functionality with custom extensions tailored to your team's specific workflows. Create personalized panels, transform custom messages into Lichtblick-compatible schemas, and map topic names for improved visualization.</p>
<p>After developing and installing your extension, navigate to your app settings to view all available and installed extensions.</p>
<h2 id="settings-api"><a class="header" href="#settings-api">Settings API</a></h2>
<p>The Panel Settings API allows users to link settings to message converters based on panel types.</p>
<h2 id="panelsettings-interface"><a class="header" href="#panelsettings-interface">PanelSettings Interface</a></h2>
<p>The <code>PanelSettings&lt;ExtensionSettings&gt;</code> interface defines the structure for managing custom settings associated with message converters and panels. It allows users to define settings that can be dynamically applied to specific topics or schemas, enabling flexible configuration of message processing behavior.</p>
<h4 id="generic-type-parameter"><a class="header" href="#generic-type-parameter">Generic Type Parameter</a></h4>
<ul>
<li><code>ExtensionSettings</code>: Represents the type of the custom settings object. This is user-defined and should match the structure of the settings you want to configure.</li>
</ul>
<h4 id="properties"><a class="header" href="#properties">Properties</a></h4>
<ol>
<li><code>settings</code></li>
</ol>
<pre><code class="language-typescript">settings: (config?: ExtensionSettings) =&gt; SettingsTreeNode;
</code></pre>
<ul>
<li>
<p><strong>Purpose</strong>: Defines how the settings should be rendered in the settings UI.</p>
</li>
<li>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>config</code>: An optional object containing the current configuration values. Its type is inferred from the <code>defaultConfig</code> property.</li>
</ul>
</li>
<li>
<p><strong>Returns:</strong> A <code>SettingsTreeNode</code> that describes the structure of the settings UI. This node will be merged with the settings tree for the associated topic (under the path <code>["topics", "__topic_name__"]</code>).</p>
</li>
<li>
<p><strong>Example:</strong></p>
</li>
</ul>
<pre><code class="language-typescript">settings: (config) =&gt; ({
  fields: {
    threshold: {
      input: "number",
      value: config?.threshold,
      label: "Threshold Value",
    },
  },
}),
</code></pre>
<hr />
<ol start="2">
<li><code>handler</code></li>
</ol>
<pre><code class="language-typescript">handler: (action: SettingsTreeAction, config?: ExtensionSettings) =&gt; void;
</code></pre>
<ul>
<li>
<p><strong>Purpose</strong>: Handles changes to the settings made by the user in the UI.</p>
</li>
<li>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>action</code>:  A <code>SettingsTreeAction</code> object describing the user's action (e.g., updating a field).</li>
<li><code>config</code>: A mutable object representing the current configuration. Modifying this object updates the state.</li>
</ul>
</li>
<li>
<p><strong>Behavior:</strong></p>
<ul>
<li>This function is called after the default settings handler.</li>
<li>It allows you to validate or transform the settings before they are applied.</li>
</ul>
</li>
<li>
<p><strong>Example:</strong></p>
</li>
</ul>
<pre><code class="language-typescript">handler: (action, config) =&gt; {
  if (action.action === "update" &amp;&amp; action.payload.path[1] === "threshold") {
    // Ensure threshold is within valid range
    config.threshold = Math.max(0, Math.min(1, action.payload.value));
  }
},
</code></pre>
<hr />
<ol start="3">
<li><code>defaultConfig</code></li>
</ol>
<pre><code class="language-typescript">defaultConfig?: ExtensionSettings;
</code></pre>
<ul>
<li>
<p><strong>Purpose:</strong> Provides default values for the settings. These values are used when no configuration is explicitly set.</p>
</li>
<li>
<p><strong>Type:</strong> Must match the <code>ExtensionSettings</code> type.</p>
</li>
<li>
<p><strong>Example:</strong></p>
</li>
</ul>
<pre><code class="language-typescript">defaultConfig: {
  threshold: 0.5,
  enableFeature: true,
},
</code></pre>
<hr />
<h4 id="expected-behavior"><a class="header" href="#expected-behavior">Expected Behavior</a></h4>
<p>When implementing this interface:</p>
<ol>
<li><strong>Settings UI:</strong> The <code>settings</code> function defines how the settings are displayed in the UI. It creates a settings tree node that is merged into the topic's settings.</li>
<li><strong>Configuration Management:</strong> The <code>handler</code> function processes user interactions with the settings UI, allowing you to validate or transform the configuration.</li>
<li><strong>Defaults:</strong> The <code>defaultConfig</code> provides initial values for the settings, ensuring the panel or converter has a valid configuration even if the user hasn't customized it.</li>
</ol>
<h4 id="possible-outcomes"><a class="header" href="#possible-outcomes">Possible Outcomes</a></h4>
<ol>
<li>
<p><strong>Dynamic Settings UI:</strong></p>
<ul>
<li>The <code>settings</code> defined in the settings function will appear in the UI under the associated topic.</li>
<li>Users can modify these settings, and changes will be handled by the <code>handler</code> function.</li>
</ul>
</li>
<li>
<p><strong>Custom Configuration:</strong></p>
<ul>
<li>The <code>handler</code> function allows you to enforce constraints or transform values before they are applied.</li>
<li>For example, you can ensure a threshold value stays within a valid range.</li>
</ul>
</li>
<li>
<p><strong>Default Behavior:</strong></p>
<ul>
<li>If no custom configuration is provided, the <code>defaultConfig</code> values are used.</li>
<li>This ensures the panel or converter works out of the box without requiring user input.</li>
</ul>
</li>
</ol>
<hr />
<h3 id="example-implementation"><a class="header" href="#example-implementation">Example Implementation:</a></h3>
<pre><code class="language-typescript">interface MyPanelSettings {
  threshold: number;
  enableFeature: boolean;
}

const myPanelSettings: PanelSettings&lt;MyPanelSettings&gt; = {
  settings: (config) =&gt; ({
    fields: {
      threshold: {
        input: "number",
        value: config?.threshold,
        label: "Threshold Value",
      },
      enableFeature: {
        input: "boolean",
        value: config?.enableFeature,
        label: "Enable Feature",
      },
    },
  }),

  handler: (action, config) =&gt; {
    if (action.action === "update") {
      if (action.payload.path[1] === "threshold") {
        // Ensure threshold is between 0 and 1
        config.threshold = Math.max(0, Math.min(1, action.payload.value));
      } else if (action.payload.path[1] === "enableFeature") {
        config.enableFeature = action.payload.value;
      }
    }
  },

  defaultConfig: {
    threshold: 0.5,
    enableFeature: true,
  },
};
</code></pre>
<h4 id="use-case"><a class="header" href="#use-case">Use Case</a></h4>
<p>This interface is typically used when registering a message converter:</p>
<pre><code class="language-typescript">ctx.registerMessageConverter({
  fromSchemaName: "schema1",
  toSchemaName: "schema2",
  converter: (msg) =&gt; transformMessage(msg),
  panelSettings: {
    MyPanel: myPanelSettings,
  },
});
</code></pre>
<hr />
<h3 id="summary"><a class="header" href="#summary">Summary</a></h3>
<p>The <code>PanelSettings&lt;ExtensionSettings&gt;</code> interface provides a structured way to:</p>
<ol>
<li>Define custom settings for panels or message converters.</li>
<li>Render these settings in the UI.</li>
<li>Handle user interactions with the settings.</li>
<li>Provide default values for the settings.</li>
</ol>
<p>By implementing this interface, you enable users to configure your panel or converter dynamically, making it more flexible and adaptable to different use cases.</p>

                        </div>
                        <div id="sidetoc">
                            <nav id="pagetoc"></nav>
                        </div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="connecting-to-data.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="visualization.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="connecting-to-data.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="visualization.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="theme/pagetoc.js"></script>


    </div>
    </body>
</html>